<header class="site-header">
  <div class="header-top">
    <div class="container">
      <a href="https://www.stanford.edu" class="stanford-link">Stanford University</a>
    </div>
  </div>
  <div class="header-sds-bar">
    <div class="container">
      <a href="https://datascience.stanford.edu" aria-label="Stanford Data Science">
        <img src="{{ '/assets/images/sds-logo.png' | relative_url }}" alt="Stanford Data Science" class="header-sds-logo">
      </a>
    </div>
  </div>
  <nav class="main-nav" aria-label="Main navigation">
    <div class="container nav-container">
      <a href="{{ '/' | relative_url }}" class="nav-brand">
        <img src="{{ '/assets/images/marlowe-logo.png' | relative_url }}" alt="Marlowe" class="brand-logo">
        <span class="brand-text">Marlowe</span>
      </a>
      <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
      <ul class="nav-links" id="nav-links">
        <li><a href="{{ '/' | relative_url }}" {% if page.url == '/' %}class="active"{% endif %}>Overview</a></li>
        <li><a href="{{ '/research/' | relative_url }}" {% if page.url contains 'research' %}class="active"{% endif %}>Research Focus</a></li>
        <li><a href="{{ '/updates/' | relative_url }}" {% if page.url contains 'updates' %}class="active"{% endif %}>Updates</a></li>
        <li><a href="{{ '/documentation/' | relative_url }}" {% if page.url contains 'documentation' %}class="active"{% endif %}>Documentation</a></li>
        <li><a href="{{ '/dashboard/' | relative_url }}" {% if page.url contains 'dashboard' %}class="active"{% endif %}>Dashboard</a></li>
        <li><a href="{{ '/access/' | relative_url }}" class="nav-cta">Apply for Access</a></li>
        <li><button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">&#9790;</button></li>
      </ul>
    </div>
  </nav>
</header>

<script>
document.querySelector('.nav-toggle').addEventListener('click', function() {
  var nav = document.getElementById('nav-links');
  var expanded = this.getAttribute('aria-expanded') === 'true';
  this.setAttribute('aria-expanded', !expanded);
  nav.classList.toggle('open');
});

(function() {
  var btn = document.getElementById('theme-toggle');
  function update() {
    var dark = document.documentElement.getAttribute('data-theme') === 'dark';
    btn.innerHTML = dark ? '&#9788;' : '&#9790;';
    btn.title = dark ? 'Switch to light mode' : 'Switch to dark mode';
  }
  update();
  btn.addEventListener('click', function() {
    var dark = document.documentElement.getAttribute('data-theme') === 'dark';
    if (dark) {
      document.documentElement.removeAttribute('data-theme');
      localStorage.setItem('theme', 'light');
    } else {
      document.documentElement.setAttribute('data-theme', 'dark');
      localStorage.setItem('theme', 'dark');
    }
    update();
  });
})();
</script>
